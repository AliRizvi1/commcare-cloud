#
# {{ ansible_managed }}
#
init_config:
  custom_jar_paths: # optional
    - {{ code_home }}/formplayer_build/formplayer.jar

instances:
  - host: localhost
    port: 9999

    name: jmx_formplayer_instance

    tags:
      env: {{ deploy_env }}
      newTag: formplayer

    conf:
      - include:
          domain: java.lang
          bean:
            - 'java.lang:name=PS Perm Gen,type=MemoryPool'
          attribute:
            Usage.committed:
              metric_type: gauge
              alias: jvm.perm_gen.committed
            Usage.init:
              metric_type: gauge
              alias: jvm.perm_gen.init
            Usage.max:
              metric_type: gauge
              alias: jvm.perm_gen.max
            Usage.used:
              metric_type: gauge
              alias: jvm.perm_gen.used
      - include:
          bean:
            - Tomcat:type=GlobalRequestProcessor
            - Tomcat:type=RequestProcessor
            - java.lang:type=Threading
            - java.lang:type=OperatingSystem
          attribute:
            - bytesSent
            - bytesReceived
            - errorCount
            - processingTime
            - requestCount
            - requestProcessingTime
            - requestBytesReceived
            - CurrentThreadCpuTime
            - CurrentThreadUserTime
            - TotalStartedThreadCount
            - DaemonThreadCount
            - PeakThreadCount
            - MaxFileDescriptorCount
            - OpenFileDescriptorCount
            - CommittedVirtualMemorySize
            - FreePhysicalMemorySize
            - FreeSwapSpaceSize
            - ProcessCpuLoad
            - ProcessCpuTime
            - SystemCpuLoad
            - TotalPhysicalMemorySize
            - TotalSwapSpaceSize
            - SystemLoadAverage
            - AvailableProcessors
