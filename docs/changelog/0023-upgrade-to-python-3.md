<!--THIS FILE IS AUTOGENERATED: DO NOT EDIT-->
<!--See https://github.com/dimagi/commcare-cloud/blob/master/changelog/README.md for instructions-->
# 23. Upgrade to Python 3

**Date:** 2017-07-16

**Optional per env:** _required on all environments_


## CommCare Version Dependency
CommCare versions beyond this commit require this change to function correctly:
[25f43bff](https://github.com/dimagi/commcare-hq/commit/25f43bffffea6ead94e91ff1f4edef0dfc95a638)
This version of CommCare must be deployed before rolling out this change:
[476e3291](https://github.com/dimagi/commcare-hq/commit/476e32910bf757d950b2575423c043bd71e83a48)


## Change Context
This change installs Python 3.6.8, builds a new virtualenv, and runs
CommCare HQ in Python 3.

## Details
Future updates to HQ are designed for Python 3 and may be incompatible
with earlier Python versions. Python 3.6.8 is required to guarantee a
zero-downtime upgrade.

## Steps to update
1. Install Python 3 requirements
```bash
commcare-cloud <env> ap deploy_common.yml --tags=common_installs
```
2. Add Python 3 virtualenv
```bash
cchq <env> ansible-playbook deploy_commcarehq.yml --tags=py3 -e 'CREATE_NEW_VIRTUALENV=1'
```
3. Update Python processes to use Python 3
```bash
cchq <env> update-supervisor-confs
```
4. Restart services to ensure services are run in Python 3.
  ```bash
  cchq <env> fab restart_services
  ```
